{
  "service": {
    "id": "{{ id | default(service_name) }}",
    "name": "{{ service_name }}",
    "tags": ["{{ env }}-{{ product }}-{{ provider }}","{{ service_name }}"],
    "address": "",
    "meta": {
      "meta": "for consul"
    },
    "port": {{ port }},
    "enable_tag_override": false,
    "check": {
      "name": "{{ service_name }} health check",
{% if check_type=='tcp'%}
      "tcp": "{{ endpoint }}",
{% elif check_type=='http' %}
      "http": "{{ endpoint }}",
{% endif %}
      "interval": "5s",
      "timeout": "1s"
    }
  }
}
